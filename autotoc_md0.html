<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Fast Randomized Iteration for Electronic Structure: Purpose:</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Fast Randomized Iteration for Electronic Structure
   </div>
   <div id="projectbrief">An implementation of FRI methods for quantum chemistry</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Purpose: </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>NumPy offers the <code>save</code> method for easy saving of arrays into .npy and <code>savez</code> for zipping multiple .npy arrays together into a .npz file.</p>
<p><code>cnpy</code> lets you read and write to these formats in C++.</p>
<p>The motivation comes from scientific programming where large amounts of data are generated in C++ and analyzed in Python.</p>
<p>Writing to .npy has the advantage of using low-level C++ I/O (fread and fwrite) for speed and binary format for size. The .npy file header takes care of specifying the size, shape, and data type of the array, so specifying the format of the data is unnecessary.</p>
<p>Loading data written in numpy formats into C++ is equally simple, but requires you to type-cast the loaded data to the type of your choice.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Installation:</h1>
<p>Default installation directory is /usr/local. To specify a different directory, add <code>-DCMAKE_INSTALL_PREFIX=/path/to/install/dir</code> to the cmake invocation in step 4.</p>
<ol type="1">
<li>get <a href="www.cmake.org">cmake</a></li>
<li>create a build directory, say $HOME/build</li>
<li>cd $HOME/build</li>
<li>cmake /path/to/cnpy</li>
<li>make</li>
<li>make install</li>
</ol>
<h1><a class="anchor" id="autotoc_md2"></a>
Using:</h1>
<p>To use, <code>#include"cnpy.h"</code> in your source code. Compile the source code mycode.cpp as</p>
<div class="fragment"><div class="line">g++ -o mycode mycode.cpp -L/path/to/install/dir -lcnpy -lz --std=c++11</div></div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Description:</h1>
<p>There are two functions for writing data: <code>npy_save</code> and <code>npz_save</code>.</p>
<p>There are 3 functions for reading:</p><ul>
<li><code>npy_load</code> will load a .npy file.</li>
<li><code>npz_load(fname)</code> will load a .npz and return a dictionary of NpyArray structues.</li>
<li><code>npz_load(fname,varname)</code> will load and return the NpyArray for data varname from the specified .npz file.</li>
</ul>
<p>The data structure for loaded data is below. Data is accessed via the <code>data&lt;T&gt;()</code>-method, which returns a pointer of the specified type (which must match the underlying datatype of the data). The array shape and word size are read from the npy header.</p>
<div class="fragment"><div class="line">{c++}</div><div class="line">struct NpyArray {</div><div class="line">    std::vector&lt;size_t&gt; shape;</div><div class="line">    size_t word_size;</div><div class="line">    template&lt;typename T&gt; T* data();</div><div class="line">};</div></div><!-- fragment --><p>See <a href="example1.cpp">example1.cpp</a> for examples of how to use the library. example1 will also be build during cmake installation. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
